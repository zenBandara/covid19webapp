<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Covid-19 Tracker</title>
    <!-- Favicon-->
    <link rel="icon" type="image/x-icon" href="assets/img/favicon.ico" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Merriweather+Sans:400,700" rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css?family=Merriweather:400,300,300italic,400italic,700,700italic" rel="stylesheet" type="text/css" />
    <!-- Third party plugin CSS-->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/magnific-popup.min.css" rel="stylesheet" />
    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="css/styles.css" rel="stylesheet" /> </head>

<body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-light fixed-top py-3" id="mainNav">
        <div class="container"> <a class="navbar-brand js-scroll-trigger" href="#page-top" id="udate">Updated - </a> </div>
    </nav>
    <!-- Masthead-->
    <header class="masthead">
        <div class="container h-100">
            <div class="row h-100 align-items-center justify-content-center text-center">
                <div class="col-lg-10 align-self-end">
                    <h1 class="text-uppercase text-white font-weight-bold">COVID - 19 Statistics</h1>
                    <hr class="divider my-4" /> </div>
                <div class="col-lg-8 align-self-baseline">
                    <p class="text-white-75 font-weight-light mb-5">Coronavirus disease (COVID-19) is an infectious disease caused by a newly discovered coronavirus.</p> <a class="btn btn-primary btn-xl js-scroll-trigger" href="#about" id="glob">click to start the journey</a> </div>
            </div>
        </div>
    </header>
    <!-- About-->
    <section class="page-section bg-primary" id="about">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="text-white mt-0">Global Deaths!</h2>
                    <hr class="divider light my-4" />
                    <h1 class="text-white-50 mb-4" id="global"></h1> <a class="btn btn-light btn-xl js-scroll-trigger" href="#services" id="localbtn">click to see Local Deaths</a> </div>
            </div>
        </div>
    </section>
    <!-- Services-->
    <section class="page-section" id="services">
        <div class="container">
            <h2 class="text-center mt-0">Local Deaths!</h2>
            <hr class="divider my-4" />
            <h1 class="text-black-50 mb-4" id="locview" style="text-align: center;"></h1>
            <h1 class="text-white-50 mb-4" id="global"></h1>
            <div style="text-align: center;"><a class="btn btn-primary btn-xl js-scroll-trigger" href="#localcases" id="localdbtn"> click to see Global Total Cases </a></div>
        </div>
    </section>
    <!-- Portfolio-->
    <!-- local cases-->
    <section class="page-section bg-primary" id="localcases">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="text-white mt-0">Global Total Cases</h2>
                    <hr class="divider light my-4" />
                    <h1 class="text-white-50 mb-4" id="globaltc"></h1> <a class="btn btn-light btn-xl js-scroll-trigger" href="#alldetails" id="alldetailsbtn">click to see Local Reasearch</a> </div>
            </div>
        </div>
    </section>
    <!-- Services-->
    <section class="page-section" id="alldetails">
        <div class="container">
            <h2 class="text-center mt-0">Local Reasearch</h2>
            <hr class="divider my-4" />
            <div class="row">
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="mt-5"> <i class="fas fa-4x fas fa-user-shield text-primary mb-4"></i>
                        <h3 class="h4 mb-2">Local Recovered</h3>
                        <h1 class="text-muted mb-0" id="recoverdview"></h1>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="mt-5"> <i class="fas fa-4x fas fa-crosshairs text-primary mb-4"></i>
                        <h3 class="h4 mb-2">Local Active Cases</h3>
                        <h1 class="text-muted mb-0" id="activecasesview"></h1>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="mt-5"> <i class="fas fa-4x fas fa-procedures text-primary mb-4"></i>
                        <h3 class="h4 mb-2">Local Total Number of Individuals in Hospitals</h3>
                        <h1 class="text-muted mb-0" id="totnohos"></h1>
                    </div>
                </div>
                <div class="col-lg-3 col-md-6 text-center">
                    <div class="mt-5"> <i class="fas fa-4x fas fa-vials text-primary mb-4"></i>
                        <h3 class="h4 mb-2">Total PCR Testing Count</h3>
                        <h1 class="text-muted mb-0" id="totpcr"></h1>
                    </div>
                </div>
            </div>
        </div>
        <br>
        <div style="text-align: center;"><a class="btn btn-primary btn-xl js-scroll-trigger" href="#graph" id="graphbtn">Click to Local PCR Testing Data!</a></div>
    </section>
    <!--graph-->
    <section class="page-section" id="graph">
        <div class="container">
            <h2 class="text-center mt-0">Daily Local PCR Testing Data</h2>
            <hr class="divider my-4" />
            <!--chart.js-->
            <canvas id="myChart" style="width:200px;height:70px;"> </canvas>
            <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
            <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
            <script>
                $(document).ready(function () {
                    $('#graphbtn').click(function () {
                        $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
                            var dates = data.data;
                            var datArray = new Array();
                            var countArray = new Array();
                            for (var x in dates.daily_pcr_testing_data) {
                                datArray[x] = dates.daily_pcr_testing_data[x].date;
                                countArray[x] = dates.daily_pcr_testing_data[x].count;
                            }
                            console.log(countArray);
                            var ctx = document.getElementById('myChart').getContext('2d');
                            var chart = new Chart(ctx, {
                                // The type of chart we want to create
                                type: 'line', // The data for our dataset
                                data: {
                                    labels: datArray
                                    , datasets: [{
                                        label: 'Daily PCR Testing Data'
                                        , backgroundColor: '#9F0000'
                                        , borderColor: '#000000'
                                        , data: countArray
        }]
                                }, // Configuration options go here
                                options: {}
                            });
                        });
                    });
                });
            </script>
            <h1 class="text-black-50 mb-4" id="locview" style="text-align: center;"></h1>
            <h1 class="text-white-50 mb-4" id="global"></h1>
            <div style="text-align: center;"><a class="btn btn-primary btn-xl js-scroll-trigger" href="#contact" id="contactbtn">Let's End up the Journey</a></div>
        </div>
    </section>

    <!-- Contact-->
    <section class="page-section" id="contact">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="mt-0">About the App!</h2>
                    <hr class="divider my-4" />
                    <p class="text-muted mb-5">Hi there! I'm Chathura Mahasen. I created this Web-Application for gather information on Corona pandemic.</p>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-4 ml-auto text-center mb-5 mb-lg-0"> <img src="profpic.jpg" style="width: 80px; border: 2px solid gray; border-radius: 50%">
                    <div>Chathura Mahasen</div>
                </div>
                <div class="col-lg-4 mr-auto text-center"> <i class="fas fa-envelope fa-3x mb-3 text-muted"></i
                        ><!-- Make sure to change the email address in BOTH the anchor text and the link target below!--><a class="d-block" href="mailto:chathuramahasen@gmail.com">chathuramahasen@gmail.com</a>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer-->
        <footer class="bg-light py-5">
            <div class="container"><div class="small text-center text-muted">Copyright Â© 2020 - Chathura Mahasen</div></div>
        </footer>
        <!-- Bootstrap core JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script>
        <!-- Third party plugin JS-->
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/magnific-popup.js/1.1.0/jquery.magnific-popup.min.js"></script>
        <!-- Core theme JS-->
        <script src="js/scripts.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/chart.js@2.8.0"></script>
        <script>
        //---------------------------js here-------------------------------------------
            
      
         $(document).ready(function () {
                $('#glob').click(function(){
                                        $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
                var gd = data.data.global_deaths;
                var ld = data.data.local_deaths;
                //console.log(data);
                //----------------------------------global deaths------------------------------
                $('#global').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: gd
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
                //----------------------------------local------------------------------
                $('.local').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ld
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
                                            
                                            
                                            
            });
                });
             //----------------local------------------------------------
             
                $('#localbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
                var gd = data.data.global_deaths;
                var ld = data.data.local_deaths;
                //console.log(data);
        
                //----------------------------------local deaths------------------------------
                $('#locview').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ld
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                });
                //----------------active cases------------------------------------
             
                $('#alldetailsbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.local_active_cases;
                //console.log(data);
        
                //----------------------------------------------------------------
                $('#activecasesview').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ac
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                });
                          //----------------Local recoverd------------------------------------
             
                $('#alldetailsbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.local_recovered;
                //console.log(data);
        
                //----------------------------------------------------------------
                $('#recoverdview').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ac
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                    });
                                           //----------------Local Total Number of Individuals in Hospitals-----------------------------------
             
            $('#alldetailsbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.local_recovered;
                //console.log(data);
        
                //----------------------------------------------------------------
                $('#totnohos').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ac
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                });
                //----------------Local Total Number of Individuals in Hospitals-----------------------------------
             
            $('#alldetailsbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.local_total_number_of_individuals_in_hospitals;
                //console.log(data);
        
                //----------------------------------------------------------------
                $('#totnohos').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ac
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                });
        //----------------Local Total Number of Individuals in Hospitals-----------------------------------
             
            $('#alldetailsbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.total_pcr_testing_count;
                //console.log(data);
        
                //----------------------------------------------------------------
                $('#totpcr').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ac
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                });
             
                     //----------------Global Total Cases----------------------------------
             
            $('#localdbtn').click(function(){
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.global_total_cases;
                //console.log(data);
        
                //----------------------------------------------------------------
                $('#globaltc').each(function () {
                    $(this).prop('Counter', 0).animate({
                        Counter: $(this).text()
                        , end: ac
                    }, {
                        duration: 4000
                        , easing: 'swing'
                        , step: function (now) {
                            $(this).text(Math.ceil(now));
                            console.log();
                        }
                    });
                });
            });
                });

                                 //---------------date----------------------------------
             
         
                 $.getJSON('https://www.hpb.health.gov.lk/api/get-current-statistical', function (data) {
             
                var ac = data.data.update_date_time;
                //console.log(data);
        
                //----------------------------------------------------------------
                $("#udate").append(ac);
            });
             
       
    });

    
    </script>
    </body>
</html>